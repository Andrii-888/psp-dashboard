# ğŸ“Š PSP Dashboard â€” Admin Panel for CryptoPay PSP Core

A frontend dashboard for internal operations of a Swiss-grade crypto payment processor (PSP).  
The dashboard connects to the `psp-core` backend and displays invoices, payment statuses, AML results, blockchain data, and webhook events.

Designed as an internal tool for **operators**, **compliance officers** and **partners** working with CryptoPay.

---

## âœ… Current Status (MVP)

### âœ” `/invoices` â€” main invoices table

Shows:

- Invoice ID + link to hosted payment page
- Created / expires timestamps
- Fiat & crypto amounts (EUR / CHF / USDT)
- Status (waiting / confirmed / expired / rejected)
- AML results (status + score)
- Network / tx hash / wallet (if attached)
- Summary counters (total / confirmed / waiting / high-risk)
- â€œOpen payment pageâ€ button

### âœ” Filtering & search

- Status filter
- AML filter
- Invoice ID search
- Min / max fiat amount
- Instant reactive updates on the client

### âœ” Invoice Details Page `/invoices/[id]`

Includes:

- **Overview** (amounts, timestamps, merchant, payment URL)
- **AML block** (invoice + asset risk)
- **Operator actions** (Confirm / Reject / Expire)
- **Blockchain transaction section**
  - shows network / wallet / tx hash
  - dev/test form to attach on-chain tx data manually
  - in production this will be filled automatically by `psp-core`
- **Webhook history**
  - list of events per invoice
  - manual â€œDispatch pending webhooksâ€ button

### âœ” API Client (`pspApi.ts`)

Exports:

- `fetchInvoices`
- `fetchInvoice`
- `runInvoiceAmlCheck`
- `confirmInvoice` / `rejectInvoice` / `expireInvoice`
- `attachInvoiceTransaction` _(dev/test helper)_
- `fetchInvoiceWebhooks`
- `dispatchInvoiceWebhooks`

### âœ” Fintech-grade UI

- Next.js 15 (App Router)
- React 19
- TypeScript
- Tailwind CSS
- Apple-style cards & pill filters
- Fully responsive (desktop / tablet / mobile)

---

ğŸ— System Architecture â€” 3 Connected Repositories
CryptoPay Ecosystem: PSP Core + Payment Page + Dashboard

Your system consists of three independent but interconnected projects, each responsible for its own layer of the payment flow.

1ï¸âƒ£ psp-core â€” Backend (NestJS)

The heart of the system.

This service handles:

creation of invoices

assignment of fiat/crypto amounts

expiration logic

AML checks

storing blockchain transaction info

webhook generation and delivery

merchant API (coming soon)

psp-core = Single source of truth.
All invoice data lives here, and all other apps only read or update it.

Provides API for:

PSP Dashboard

CryptoPay payment widget/page

Merchants (future)

2ï¸âƒ£ CryptoPay Frontend â€” Payment Page / Checkout

What the customer sees.

This is the public-facing UI shown to a buyer in an online store.

It:

receives invoiceId from the merchant

loads invoice info from psp-core

shows the amount to pay in USDT/EUR/CHF

shows wallet generated by the merchant (or PSP)

accepts the payment

calls backend endpoints to update invoice statuses

redirects the customer after successful payment

Responsibilities:

Friendly UX for clients

Wallet QR code display

Timer until expiration

Auto-updating status

Error handling & redirect for merchants

3ï¸âƒ£ PSP Dashboard â€” Internal Admin Panel (Next.js)

Tool for operators, compliance, partners.

It connects ONLY to psp-core and shows:

invoice list

statuses

AML results

blockchain transaction info

webhook logs

Plus operator manual controls:

Confirm

Reject

Expire

Run AML

View & Dispatch webhooks

(DEV ONLY) Attach blockchain data

Responsibilities:

Easy visibility of all PSP operations

Monitoring payments

Investigating AML alerts

Managing webhooks & merchant integrations

Preparing accounting/reconciliation data

ğŸ”— How All Three Work Together
ğŸ¬ Merchant shop

â†’ calls PSP to create invoice
â†’ redirects buyer to CryptoPay payment page

ğŸ’³ CryptoPay Payment Page (frontend)

â†’ loads invoice from PSP Core
â†’ shows payment instructions
â†’ user sends crypto
â†’ updates status in PSP Core
â†’ triggers webhook generation

ğŸ§  psp-core (backend)

â†’ stores invoice + payment
â†’ performs AML
â†’ sends webhooks
â†’ updates confirmations
â†’ exposes API for Dashboard

ğŸ‘¨â€ğŸ’¼ PSP Dashboard

â†’ reads invoice data
â†’ operator confirms/rejects
â†’ reads AML flags
â†’ monitors system
â†’ debugs integrations

ğŸ§­ Why This Architecture Is Good
âœ” Each service is independent

You can deploy, update and scale them separately.

âœ” Security boundaries

Checkout (public)

Admin dashboard (private)

Backend (protected)

âœ” Clear responsibilities

PSP core = logic & truth

Dashboard = visibility

Checkout = UX for customers

âœ” Easy future expansion

Merchant panel

Accounting exports

Multi-merchant API keys

Blockchain auto-verification

Real AML providers

Multiple networks

Settlement modules

## ğŸ§© Tech Stack

- **Frontend:** Next.js 15 (App Router), React 19, TypeScript
- **Styling:** Tailwind CSS
- **Data layer:** Fetch API + custom `pspApi` client
- **Backend:** external `psp-core` service (NestJS)

---

## ğŸ“ Project Structure

```bash
psp-dashboard/
â”œâ”€ src/
â”‚  â”œâ”€ app/
â”‚  â”œâ”€ components/
â”‚  â””â”€ lib/
â”œâ”€ public/
â”œâ”€ package.json
â”œâ”€ tsconfig.json
â””â”€ README.md
ğŸ”§ Requirements
Node.js 20+

Running psp-core backend (NestJS) available over HTTP

âš™ Environment Setup
Create .env.local in the project root and set backend URL:

env
Copy code
NEXT_PUBLIC_PSP_API_URL=http://localhost:3000
For a remote backend:

env
Copy code
NEXT_PUBLIC_PSP_API_URL=https://psp-core.your-domain.com
ğŸš€ Run Locally
bash
Copy code
npm install
npm run dev
Open the dashboard:

Main table: http://localhost:3000/invoices

ğŸ”Œ Backend Integration
The dashboard expects the psp-core backend to expose:

GET /invoices

GET /invoices/:id

POST /invoices/:id/aml/check

POST /invoices/:id/confirm

POST /invoices/:id/reject

POST /invoices/:id/expire

POST /invoices/:id/tx

GET /invoices/:id/webhooks

POST /invoices/:id/webhooks/dispatch

All requests are encapsulated in src/lib/pspApi.ts.

â„¹ï¸ attachInvoiceTransaction and the on-chain form inside BlockchainCard are intended for demo / test environments.
In production, blockchain data should be populated automatically from PSP Core / blockchain indexers.

ğŸ›£ Roadmap â€” Toward Full Production Readiness
ğŸ”œ 1. Real FX / Exchange Rate API
Consistent pricing for USDT â†’ EUR / CHF / USD across CryptoPay and PSP Dashboard.

ğŸ”œ 2. Blockchain RPC / indexer integration
Automatic transaction lookup, confirmations, and matching with invoices.

ğŸ”œ 3. Real AML provider integration
Chainalysis / Elliptic / Scorechain, configurable per environment.

ğŸ”œ 4. Merchant Console
Separate restricted dashboard for merchants with their own invoices and reports.

ğŸ”œ 5. Email / Notification system
Notify merchants/operators when invoice status or AML result changes.

ğŸ”œ 6. Advanced filtering
Date range, merchant filter, txHash search, network filter, etc.

ğŸ”œ 7. Production deployment
Vercel (frontend) + Render/Railway/other for psp-core backend.

markdown
Copy code

Ğ•ÑĞ»Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ, Ğ¼Ğ¾Ğ³Ñƒ Ğ½Ğ¸Ğ¶Ğµ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ **Ñ€ÑƒÑÑĞºÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ** ÑÑ‚Ğ¾Ğ³Ğ¾ README (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºÑƒÑ, Ğ´Ğ»Ñ ÑĞµĞ±Ñ / Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ²).
ĞšĞ¾Ğ´ Ñ‚Ñ€Ğ¾Ğ³Ğ°Ñ‚ÑŒ Ğ½Ğµ Ğ±ÑƒĞ´ĞµĞ¼, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ°ĞºĞºÑƒÑ€Ğ°Ñ‚Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑˆÑƒ README â€” Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ĞµĞ³Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ ÑÑ€Ğ°Ğ·Ñƒ ĞºĞ¸Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ° GitHub. Ğ¯ ĞµÑ‰Ñ‘ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»Ñ Ğ¿Ğ¾Ğ¼ĞµÑ‚ĞºÑƒ, Ñ‡Ñ‚Ğ¾ manual attach TX â€” ÑÑ‚Ğ¾ dev / test mode.

Ğ’Ğ¾Ñ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚:

ğŸ“Š PSP Dashboard â€” Admin Panel for CryptoPay PSP Core

A frontend dashboard for internal operations of a Swiss-grade crypto payment processor (PSP).
The dashboard connects to the psp-core backend and displays invoices, payment statuses, AML results, blockchain data and webhook events.

Designed as an internal tool for operators, compliance officers and partners working with CryptoPay.

âœ… Current Status (MVP)
âœ” /invoices â€” main invoices table
Displays:

Invoice ID (with link to hosted payment page)

Created / expires timestamps

Fiat & crypto amounts (EUR / CHF / USDT)

Status: waiting, confirmed, expired, rejected

AML results (clean / warning / risky / none)

Network / tx hash / wallet (if attached)

Summary counters (total / confirmed / waiting / high-risk)

â€œOpen payment pageâ€ action

âœ” Filtering & search
Status filter

AML filter

Search by Invoice ID

Min / max fiat amount

Instant reactive filtering on the client

âœ” Invoice Details Page (/invoices/[id])
Blocks:

Overview â€” core invoice data (amounts, timestamps, merchant, payment page link)

AML status â€” risk score, asset risk, badges

Operator actions â€” Confirm / Reject / Expire

Blockchain transaction

shows network / wallet / tx hash

dev / test form to manually attach on-chain data via attachInvoiceTransaction

in production this is expected to be filled automatically by the PSP core

Webhooks history

list of webhook events for this invoice

â€œDispatch pending webhooksâ€ button

âœ” API Client (src/lib/pspApi.ts)
Exposes:

fetchInvoices

fetchInvoice

runInvoiceAmlCheck

confirmInvoice / rejectInvoice / expireInvoice

attachInvoiceTransaction (dev / test helper)

fetchInvoiceWebhooks

dispatchInvoiceWebhooks

âœ” Fintech-grade UI
Next.js 15 (App Router)

React 19

TypeScript

Tailwind CSS

Custom â€œApple-styleâ€ card layout

Fully responsive (desktop / tablet / mobile)

ğŸ§© Tech Stack
Framework: Next.js 15 (App Router)

UI: React 19 + Tailwind CSS

Language: TypeScript

Data access: Fetch API + custom pspApi client

ğŸ“ Project Structure
text
Copy code
psp-dashboard/
â”œâ”€ src/
â”‚  â”œâ”€ app/
â”‚  â”‚  â””â”€ invoices/
â”‚  â”‚     â”œâ”€ page.tsx        # Invoices list
â”‚  â”‚     â””â”€ [id]/page.tsx   # Invoice details
â”‚  â”œâ”€ components/
â”‚  â”‚  â”œâ”€ FiltersBar.tsx
â”‚  â”‚  â””â”€ invoice-details/
â”‚  â”‚     â”œâ”€ OverviewCard.tsx
â”‚  â”‚     â”œâ”€ OperatorActionsCard.tsx
â”‚  â”‚     â”œâ”€ BlockchainCard.tsx
â”‚  â”‚     â””â”€ WebhooksCard.tsx
â”‚  â””â”€ lib/
â”‚     â””â”€ pspApi.ts          # Client for psp-core API
â”œâ”€ public/
â”œâ”€ package.json
â”œâ”€ tsconfig.json
â””â”€ README.md
ğŸ”§ Requirements
Node.js 20+

Running psp-core backend (NestJS), reachable from the dashboard

âš™ Environment Setup
Create .env.local in the project root and set the PSP core API URL:

bash
Copy code
NEXT_PUBLIC_PSP_API_URL=http://localhost:3000
For a remote backend:

bash
Copy code
NEXT_PUBLIC_PSP_API_URL=https://psp-core.your-domain.com
ğŸš€ Run Locally
bash
Copy code
npm install
npm run dev
Open:

Main dashboard: http://localhost:3000/invoices

ğŸ”Œ Backend Integration
Expected endpoints on psp-core:

GET /invoices

GET /invoices/:id

POST /invoices/:id/aml/check

POST /invoices/:id/confirm

POST /invoices/:id/reject

POST /invoices/:id/expire

POST /invoices/:id/tx

GET /invoices/:id/webhooks

POST /invoices/:id/webhooks/dispatch

All API calls are encapsulated in src/lib/pspApi.ts.

ğŸ›£ Roadmap â€” towards full production readiness
Real FX / exchange rate API

Consistent USDT â†” EUR / CHF / USD pricing shared between CryptoPay and PSP Dashboard.

Blockchain RPC integration

Read-only blockchain client for transaction status & confirmations.

Automatic filling of network / txHash / wallet (replacing the dev form).

Real AML provider integration

Integration with Chainalysis / Elliptic / Scorechain or similar.

Display provider-level status and reason codes.

Merchant Console

Separate restricted dashboard for merchants (their own invoices only).

API keys / tokens, basic access control.

Email / notification system

Notify merchants / operators when invoice status or AML state changes.

Advanced filtering

Date range filter

Merchant filter

Search by txHash, walletAddress and merchantId.

Production deployment

Frontend: Vercel

Backend: Railway

Environment configs for staging / production.

```
